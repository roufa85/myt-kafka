## REFACTOR::

# N = 3
# (1..N).each do |machine_id|
#   config.vm.define "machine#{machine_id}" do |machine|
#     machine.vm.hostname = "machine#{machine_id}"
#     machine.vm.network "private_network", ip: "192.168.77.#{20+machine_id}"

#     # Only execute once the Ansible provisioner,
#     # when all the machines are up and ready.
#     if machine_id == N
#       machine.vm.provision :ansible do |ansible|
#         # Disable default limit to connect to all the machines
#         ansible.limit = "all"
#         ansible.playbook = "playbook.yml"
#       end
#     end
#   end
# end

# https://www.vagrantup.com/docs/provisioning/ansible_local.html#ansible-parallel-execution-from-a-guest

# machine.vm.provision :ansible_local do |ansible|
#   ansible.playbook       = "example.yml"
#   ansible.verbose        = true
#   ansible.install        = true
#   ansible.limit          = "all" # or only "nodes" group, etc.
#   ansible.inventory_path = "inventory"
# end